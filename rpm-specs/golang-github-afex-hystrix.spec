# Generated by go2rpm
%bcond_without check

%global debug_package %{nil}

# https://github.com/afex/hystrix-go
%global goipath         github.com/afex/hystrix-go
%global commit          fa1af6a1f4f56e0e50d427fe901cd604d8c6fb8a

%gometa

%global common_description %{expand:
Hystrix is a latency and fault tolerance library designed to isolate points of
access to remote systems, services and 3rd party libraries, stop cascading
failure and enable resilience in complex distributed systems where failure is
inevitable.}

%global golicenses      LICENSE
%global godocs          README.md

Name:           %{goname}
Version:        0
Release:        %autorelease
Summary:        Netflix's hystrix latency and fault tolerance library, for go

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}
# Make hystrix compaible with github.com/cactus/go-statsd-client v5
Patch0:         0001-Make-compatible-with-statsd-5.0.0.patch

BuildRequires:  golang(github.com/cactus/go-statsd-client/statsd)
BuildRequires:  golang(github.com/DataDog/datadog-go/statsd)
BuildRequires:  golang(github.com/rcrowley/go-metrics)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/smartystreets/goconvey/convey)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
%patch -P0 -p1

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
%autochangelog
