# Generated by go2rpm 1.14.0
%ifnarch %{ix86} %{arm}
%bcond check 1
%else
%bcond check 0
%endif
%bcond bootstrap 0

%global debug_package %{nil}

%if %{with bootstrap}
%global __requires_exclude %{?__requires_exclude:%{__requires_exclude}|}^golang\\(.*\\)$
%endif

# https://github.com/aliyun/alibaba-cloud-sdk-go
%global goipath         github.com/aliyun/alibaba-cloud-sdk-go
Version:                1.61.1453

%gometa -L

%global common_description %{expand:
Alibaba Cloud SDK for Go allows you to access Alibaba Cloud services such as
Elastic Compute Service (ECS), Server Load Balancer (SLB), and CloudMonitor. You
can access Alibaba Cloud services without the need to handle API related tasks,
such as signing and constructing your requests.}

%global golicenses      LICENSE
%global godocs          docs CONTRIBUTING.md ChangeLog.txt README-CN.md\\\
                        README.md tools/document.md

Name:           golang-github-aliyun-alibaba-cloud-sdk
Release:        %autorelease
Summary:        Alibaba Cloud SDK for Go

License:        Apache-2.0
URL:            %{gourl}
Source:         %{gosource}
Patch:          0001-fix-tests-from-add-headers-commit.patch

%description %{common_description}

%gopkg

%prep
%goprep -A
%autopatch -p1

# Drop dep in golang-github-goji-httpauth
rm -rf integration/core_test.go

%if %{without bootstrap}
%generate_buildrequires
%go_generate_buildrequires
%endif


%install
%gopkginstall

%if %{without bootstrap}
%if %{with check}
%check
# sdk/responses: error messages slightly modified
%gocheck -d integration \
         -d sdk \
         -d sdk/auth/credentials/providers \
         -d sdk/auth/signers \
         -d sdk/responses
%endif
%endif

%gopkgfiles

%changelog
%autochangelog
