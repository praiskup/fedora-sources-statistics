# Generated by go2rpm
%bcond_without check
%global debug_package %{nil}

# https://github.com/checkpoint-restore/go-criu
%global goipath         github.com/checkpoint-restore/go-criu
Version:                5.3.0

%gometa

%global goaltipaths     github.com/checkpoint-restore/go-criu/v5

%global common_description %{expand:
This repository provides Go bindings for CRIU. The code is based on the Go based
PHaul implementation from the CRIU repository. For easier inclusion into other
Go projects the CRIU Go bindings have been moved to this repository.

The Go bindings provide an easy way to use the CRIU RPC calls from Go without
the need to set up all the infrastructure to make the actual RPC connection to
CRIU.}

%global golicenses      LICENSE
%global godocs          README.md

Name:           %{goname}
Release:        %autorelease
Summary:        Go Bindings for CRIU

# Upstream license specification: Apache-2.0
# Automatically converted from old format: ASL 2.0 - review is highly recommended.
License:        Apache-2.0
URL:            %{gourl}
Source0:        %{gosource}

%description
%{common_description}

%gopkg

%prep
%goprep

# Remove extra deps
rm -rf crit-go/magic-gen/

%generate_buildrequires
%go_generate_buildrequires

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
%autochangelog
