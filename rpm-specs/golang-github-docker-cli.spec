# Generated by go2rpm 1.8.2
%bcond_without check
%global debug_package %{nil}

# https://github.com/docker/cli
%global goipath         github.com/docker/cli
Version:                22.06.0~beta.0
%global tag             v22.06.0-beta.0

%gometa

%global common_description %{expand:
The docker CLI.}

%global golicenses      LICENSE NOTICE
%global godocs          docs CONTRIBUTING.md README.md TESTING.md AUTHORS

Name:           %{goname}
Release:        %autorelease
Summary:        The docker CLI

License:        Apache-2.0
URL:            %{gourl}
Source:         %{gosource}
# For compatibility with current Swarmkit
# https://github.com/moby/swarmkit/issues/3081
Patch0:         0001-Revert-vendor-github.com-docker-docker.patch

%description %{common_description}

%gopkg

%prep
%goprep
%patch -P0 -p1
sed -i "s|github.com/docker/distribution|github.com/distribution/distribution/v3|" $(find . -iname "*.go" -type f)

%generate_buildrequires
%go_generate_buildrequires

# %%build
# for cmd in cmd/* ; do
#   %%gobuild -o %%{gobuilddir}/bin/$(basename $cmd) %%{goipath}/$cmd
# done

%install
%gopkginstall
# install -m 0755 -vd                     %%{buildroot}%%{_bindir}
# install -m 0755 -vp %%{gobuilddir}/bin/* %%{buildroot}%%{_bindir}/

%%if %{with check}
%check
%gocheck -t cli
%endif

# %%files
# %%license LICENSE NOTICE
# %%doc docs CONTRIBUTING.md README.md TESTING.md AUTHORS
# %%{_bindir}/*

%gopkgfiles

%changelog
%autochangelog
