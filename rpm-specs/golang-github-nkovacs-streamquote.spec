# Generated by go2rpm 1.9.0
%bcond_without check
%global debug_package %{nil}

# https://github.com/nkovacs/streamquote
%global goipath         github.com/nkovacs/streamquote
Version:                1.0.0

%gometa

%global common_description %{expand:
This package provides a streaming version of strconv.Quote.

It allows you to quote the data in an io.Reader and write it out to an io.Writer
without having to store the entire input and the entire output in memory.

Its primary use case is go.rice and similar tools, which need to convert lots of
files, some of them quite large, to go strings.}

%global golicenses      LICENSE
%global godocs          README.md

Name:           %{goname}
Release:        %autorelease
Summary:        Streaming version of strconv.Quote

License:        BSD-3-Clause
URL:            %{gourl}
Source:         %{gosource}

%description %{common_description}

%gopkg

%prep
%goprep
%autopatch -p1

%generate_buildrequires
%go_generate_buildrequires

%install
%gopkginstall

%if %{with check}
%check
# https://github.com/nkovacs/streamquote/issues/4
for test in "TestLargeString" \
; do
awk -i inplace '/^func.*'"$test"'\(/ { print; print "\tt.Skip(\"disabled failing test\")"; next}1' $(grep -rl $test)
done
%gocheck
%endif

%gopkgfiles

%changelog
%autochangelog
