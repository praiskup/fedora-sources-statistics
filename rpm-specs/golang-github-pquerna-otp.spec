# Generated by go2rpm
%bcond_without check

%global debug_package %{nil}

# https://github.com/pquerna/otp
%global goipath         github.com/pquerna/otp
Version:                1.4.0

%gometa

%global common_description %{expand:
One Time Passwords (OTPs) are an mechanism to improve security over passwords
alone. When a Time-based OTP (TOTP) is stored on a user's phone, and combined
with something the user knows (Password), you have an easy on-ramp to
Multi-factor authentication without adding a dependency on a SMS provider. This
Password and TOTP combination is used by many popular websites including Google,
Github, Facebook, Salesforce and many others.

The otp library enables you to easily add TOTPs to your own application,
increasing your user's security against mass-password breaches and malware.}

%global golicenses      LICENSE NOTICE
%global godocs          example README.md

Name:           %{goname}
Release:        %autorelease
Summary:        TOTP library for Go

# Upstream license specification: Apache-2.0
# Automatically converted from old format: ASL 2.0 - review is highly recommended.
License:        Apache-2.0
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(github.com/boombuler/barcode)
BuildRequires:  golang(github.com/boombuler/barcode/qr)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/gokyle/twofactor)
BuildRequires:  golang(github.com/stretchr/testify/assert)
BuildRequires:  golang(github.com/stretchr/testify/require)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%gopkgfiles

%changelog
%autochangelog
