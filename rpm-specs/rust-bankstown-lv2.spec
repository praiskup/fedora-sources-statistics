# Generated by rust2rpm 25
%bcond_without check

%global crate bankstown-lv2

Name:           rust-bankstown-lv2
Version:        1.1.0
Release:        %autorelease
Summary:        Barebones, fast LV2 bass enhancement plugin

License:        MIT
URL:            https://crates.io/crates/bankstown-lv2
Source:         %{crates_source}

BuildRequires:  cargo-rpm-macros >= 24
BuildRequires:  make

# Not supported by rust-lv2
ExcludeArch:    ppc64le s390x

%global _description %{expand:
Bankstown is a barebones, fast LV2 bass enhancement plugin implementing
halfway-decent three-stage psychoacoustic bass approximation.}

%description %{_description}

%package     -n lv2-bankstown
Summary:        %{summary}
License:        MIT AND (MIT OR Apache-2.0)
Requires:       lv2
Provides:       %{crate} = %{version}-%{release}
Provides:       %{crate}%{?_isa} = %{version}-%{release}
Obsoletes:      %{crate} < 1.0.0-2

%description -n lv2-bankstown %{_description}

%files       -n lv2-bankstown
%license LICENSE
%license LICENSE.dependencies
%doc README.md
%{_libdir}/lv2/bankstown.lv2/

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build
%{cargo_license_summary}
%{cargo_license} > LICENSE.dependencies

%install
%make_install LIBDIR="%{_libdir}"

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
