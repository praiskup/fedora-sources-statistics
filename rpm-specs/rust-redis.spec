# Generated by rust2rpm 26
# * Tests fail randomly when building in Koji
%bcond_with check
%global debug_package %{nil}

%global crate redis

Name:           rust-redis
Version:        0.25.4
Release:        %autorelease
Summary:        Driver for Rust

# src/cluster_async is MIT, the rest is BSD-3-Clause
License:        BSD-3-Clause AND MIT
URL:            https://crates.io/crates/redis
Source:         %{crates_source}
# Manually created patch for downstream crate metadata changes
# * Drop unneded criterion dependency
# * Bump tempfile to 3.10
# * Bump async-native-tls to 0.5
# * Bump tokio-rustls to 0.26
Patch:          redis-fix-metadata.diff

BuildRequires:  cargo-rpm-macros >= 24
%if %{with check}
BuildRequires:  valkey-compat-redis
%endif

%global _description %{expand:
Redis driver for Rust.}

%description %{_description}

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel %{_description}

This package contains library source intended for building other packages which
use the "%{crate}" crate.

%files          devel
%license %{crate_instdir}/LICENSE
%license %{crate_instdir}/src/cluster_async/LICENSE
%doc %{crate_instdir}/CHANGELOG.md
%doc %{crate_instdir}/README.md
%{crate_instdir}/

%package     -n %{name}+default-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+default-devel %{_description}

This package contains library source intended for building other packages which
use the "default" feature of the "%{crate}" crate.

%files       -n %{name}+default-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+acl-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+acl-devel %{_description}

This package contains library source intended for building other packages which
use the "acl" feature of the "%{crate}" crate.

%files       -n %{name}+acl-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+ahash-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+ahash-devel %{_description}

This package contains library source intended for building other packages which
use the "ahash" feature of the "%{crate}" crate.

%files       -n %{name}+ahash-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+aio-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+aio-devel %{_description}

This package contains library source intended for building other packages which
use the "aio" feature of the "%{crate}" crate.

%files       -n %{name}+aio-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+arc-swap-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+arc-swap-devel %{_description}

This package contains library source intended for building other packages which
use the "arc-swap" feature of the "%{crate}" crate.

%files       -n %{name}+arc-swap-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-native-tls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-native-tls-devel %{_description}

This package contains library source intended for building other packages which
use the "async-native-tls" feature of the "%{crate}" crate.

%files       -n %{name}+async-native-tls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-std-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-std-devel %{_description}

This package contains library source intended for building other packages which
use the "async-std" feature of the "%{crate}" crate.

%files       -n %{name}+async-std-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-std-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-std-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "async-std-comp" feature of the "%{crate}" crate.

%files       -n %{name}+async-std-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-std-native-tls-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-std-native-tls-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "async-std-native-tls-comp" feature of the "%{crate}" crate.

%files       -n %{name}+async-std-native-tls-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-std-tls-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-std-tls-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "async-std-tls-comp" feature of the "%{crate}" crate.

%files       -n %{name}+async-std-tls-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+async-trait-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+async-trait-devel %{_description}

This package contains library source intended for building other packages which
use the "async-trait" feature of the "%{crate}" crate.

%files       -n %{name}+async-trait-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+bigdecimal-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+bigdecimal-devel %{_description}

This package contains library source intended for building other packages which
use the "bigdecimal" feature of the "%{crate}" crate.

%files       -n %{name}+bigdecimal-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+bytes-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+bytes-devel %{_description}

This package contains library source intended for building other packages which
use the "bytes" feature of the "%{crate}" crate.

%files       -n %{name}+bytes-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+cluster-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+cluster-devel %{_description}

This package contains library source intended for building other packages which
use the "cluster" feature of the "%{crate}" crate.

%files       -n %{name}+cluster-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+cluster-async-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+cluster-async-devel %{_description}

This package contains library source intended for building other packages which
use the "cluster-async" feature of the "%{crate}" crate.

%files       -n %{name}+cluster-async-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+connection-manager-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+connection-manager-devel %{_description}

This package contains library source intended for building other packages which
use the "connection-manager" feature of the "%{crate}" crate.

%files       -n %{name}+connection-manager-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+crc16-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+crc16-devel %{_description}

This package contains library source intended for building other packages which
use the "crc16" feature of the "%{crate}" crate.

%files       -n %{name}+crc16-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+disable-client-setinfo-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+disable-client-setinfo-devel %{_description}

This package contains library source intended for building other packages which
use the "disable-client-setinfo" feature of the "%{crate}" crate.

%files       -n %{name}+disable-client-setinfo-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+futures-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+futures-devel %{_description}

This package contains library source intended for building other packages which
use the "futures" feature of the "%{crate}" crate.

%files       -n %{name}+futures-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+futures-util-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+futures-util-devel %{_description}

This package contains library source intended for building other packages which
use the "futures-util" feature of the "%{crate}" crate.

%files       -n %{name}+futures-util-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+geospatial-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+geospatial-devel %{_description}

This package contains library source intended for building other packages which
use the "geospatial" feature of the "%{crate}" crate.

%files       -n %{name}+geospatial-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+json-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+json-devel %{_description}

This package contains library source intended for building other packages which
use the "json" feature of the "%{crate}" crate.

%files       -n %{name}+json-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+keep-alive-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+keep-alive-devel %{_description}

This package contains library source intended for building other packages which
use the "keep-alive" feature of the "%{crate}" crate.

%files       -n %{name}+keep-alive-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+log-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+log-devel %{_description}

This package contains library source intended for building other packages which
use the "log" feature of the "%{crate}" crate.

%files       -n %{name}+log-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+native-tls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+native-tls-devel %{_description}

This package contains library source intended for building other packages which
use the "native-tls" feature of the "%{crate}" crate.

%files       -n %{name}+native-tls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+num-bigint-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+num-bigint-devel %{_description}

This package contains library source intended for building other packages which
use the "num-bigint" feature of the "%{crate}" crate.

%files       -n %{name}+num-bigint-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+pin-project-lite-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+pin-project-lite-devel %{_description}

This package contains library source intended for building other packages which
use the "pin-project-lite" feature of the "%{crate}" crate.

%files       -n %{name}+pin-project-lite-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+r2d2-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+r2d2-devel %{_description}

This package contains library source intended for building other packages which
use the "r2d2" feature of the "%{crate}" crate.

%files       -n %{name}+r2d2-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rand-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rand-devel %{_description}

This package contains library source intended for building other packages which
use the "rand" feature of the "%{crate}" crate.

%files       -n %{name}+rand-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rust_decimal-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rust_decimal-devel %{_description}

This package contains library source intended for building other packages which
use the "rust_decimal" feature of the "%{crate}" crate.

%files       -n %{name}+rust_decimal-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rustls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rustls-devel %{_description}

This package contains library source intended for building other packages which
use the "rustls" feature of the "%{crate}" crate.

%files       -n %{name}+rustls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rustls-native-certs-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rustls-native-certs-devel %{_description}

This package contains library source intended for building other packages which
use the "rustls-native-certs" feature of the "%{crate}" crate.

%files       -n %{name}+rustls-native-certs-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rustls-pemfile-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rustls-pemfile-devel %{_description}

This package contains library source intended for building other packages which
use the "rustls-pemfile" feature of the "%{crate}" crate.

%files       -n %{name}+rustls-pemfile-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+rustls-pki-types-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+rustls-pki-types-devel %{_description}

This package contains library source intended for building other packages which
use the "rustls-pki-types" feature of the "%{crate}" crate.

%files       -n %{name}+rustls-pki-types-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+script-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+script-devel %{_description}

This package contains library source intended for building other packages which
use the "script" feature of the "%{crate}" crate.

%files       -n %{name}+script-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+sentinel-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+sentinel-devel %{_description}

This package contains library source intended for building other packages which
use the "sentinel" feature of the "%{crate}" crate.

%files       -n %{name}+sentinel-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+serde-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+serde-devel %{_description}

This package contains library source intended for building other packages which
use the "serde" feature of the "%{crate}" crate.

%files       -n %{name}+serde-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+serde_json-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+serde_json-devel %{_description}

This package contains library source intended for building other packages which
use the "serde_json" feature of the "%{crate}" crate.

%files       -n %{name}+serde_json-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+sha1_smol-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+sha1_smol-devel %{_description}

This package contains library source intended for building other packages which
use the "sha1_smol" feature of the "%{crate}" crate.

%files       -n %{name}+sha1_smol-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+socket2-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+socket2-devel %{_description}

This package contains library source intended for building other packages which
use the "socket2" feature of the "%{crate}" crate.

%files       -n %{name}+socket2-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+streams-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+streams-devel %{_description}

This package contains library source intended for building other packages which
use the "streams" feature of the "%{crate}" crate.

%files       -n %{name}+streams-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tcp_nodelay-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tcp_nodelay-devel %{_description}

This package contains library source intended for building other packages which
use the "tcp_nodelay" feature of the "%{crate}" crate.

%files       -n %{name}+tcp_nodelay-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tls-devel %{_description}

This package contains library source intended for building other packages which
use the "tls" feature of the "%{crate}" crate.

%files       -n %{name}+tls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tls-native-tls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tls-native-tls-devel %{_description}

This package contains library source intended for building other packages which
use the "tls-native-tls" feature of the "%{crate}" crate.

%files       -n %{name}+tls-native-tls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tls-rustls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tls-rustls-devel %{_description}

This package contains library source intended for building other packages which
use the "tls-rustls" feature of the "%{crate}" crate.

%files       -n %{name}+tls-rustls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tls-rustls-insecure-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tls-rustls-insecure-devel %{_description}

This package contains library source intended for building other packages which
use the "tls-rustls-insecure" feature of the "%{crate}" crate.

%files       -n %{name}+tls-rustls-insecure-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tls-rustls-webpki-roots-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tls-rustls-webpki-roots-devel %{_description}

This package contains library source intended for building other packages which
use the "tls-rustls-webpki-roots" feature of the "%{crate}" crate.

%files       -n %{name}+tls-rustls-webpki-roots-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-comp" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-native-tls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-native-tls-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-native-tls" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-native-tls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-native-tls-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-native-tls-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-native-tls-comp" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-native-tls-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-retry-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-retry-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-retry" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-retry-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-rustls-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-rustls-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-rustls" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-rustls-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-rustls-comp-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-rustls-comp-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-rustls-comp" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-rustls-comp-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+tokio-util-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+tokio-util-devel %{_description}

This package contains library source intended for building other packages which
use the "tokio-util" feature of the "%{crate}" crate.

%files       -n %{name}+tokio-util-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+uuid-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+uuid-devel %{_description}

This package contains library source intended for building other packages which
use the "uuid" feature of the "%{crate}" crate.

%files       -n %{name}+uuid-devel
%ghost %{crate_instdir}/Cargo.toml

%package     -n %{name}+webpki-roots-devel
Summary:        %{summary}
BuildArch:      noarch

%description -n %{name}+webpki-roots-devel %{_description}

This package contains library source intended for building other packages which
use the "webpki-roots" feature of the "%{crate}" crate.

%files       -n %{name}+webpki-roots-devel
%ghost %{crate_instdir}/Cargo.toml

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
