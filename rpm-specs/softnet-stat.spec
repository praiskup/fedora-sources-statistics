# Generated by rust2rpm 20
%bcond_without check

Name:           softnet-stat
Version:        2.1.0
Release:        %autorelease
Summary:        Parse the `/proc/net/softnet_stat` file into something more readable

# Upstream license specification: GPL-3.0
# Automatically converted from old format: GPLv3+ - review is highly recommended.
License:        GPL-3.0-or-later
URL:            https://github.com/hjr3/softnet-stat
Source:         https://github.com/hjr3/softnet-stat/archive/refs/tags/v%{version}.tar.gz

ExclusiveArch:  %{rust_arches}

BuildRequires:  rust-packaging

%global _description %{expand:
This tool parse raw data provided by kernel in /proc/net/softnet_stat 
to different formats: 
  - human readable format
  - JSON format
  - Prometheus format
to enable easier troubleshooting of the softnet related network issue.}

%description %{_description}

%files
%license LICENSE
%doc README.md
%{_bindir}/softnet-stat

%prep
%autosetup -n softnet-stat-%{version} -p1
%cargo_prep

%generate_buildrequires
%cargo_generate_buildrequires

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%changelog
%autochangelog
